---
title: "Characteristics of Immigrants to the US by Type of Immigration Status"
subtitle: "Project Proposal"
author: "Ben 10"
date: "October 27, 2019"
output: github_document
---

```{r}
library(readr)
library(knitr)
library(tidyverse)
library(dplyr)
```

## Section 1. Introduction
In recent years, immigration has been a topic of intense controversy. Given the complexity of immigration law, we are interested in examining patterns in immigration since the beginning of the millenia. The U.S. stance on immigration has grown increasingly strict, not only for "illegal" immigration, but also for legal immigration: naturalization, visa use, lawful permanent residency, refugee status, and asylum seekers. 
For example, the number of refugees accepted to the US fell to 22,491 in 2018 from 84,994 in 2016 according to the Department of State, likely as a result of hard line policies against refugees coming to the US. As immigration policies seem likely to tighten in the lead up to the 2020 elections,###logistic regression on whetehr they got citizenship or not of those who applied... (what prop applied compared to overall. It would be interesting to see what contributed to who applies (Tackett)###

Given the variety of ways to immigrate legally, and the varying processes and timelines for each, we would expect that the characteristics of immigrants using each pathway to differ. By examining the demographics of each immigration pathway, we can determine the trends, if any, that exist in the current immigration infrastructure.

Our research project aims to determine the differences in characteristics between different classes of legal immigration. We hypothesize that there exist statistically significant differences in the populations which recieve different types of visa, and we particularly are interested in region of origin as a way to identify populations that may be targeted by federal policy. 

## Section 2: Exploratory Data Analysis



## Section 2. Analysis plan

```{r}
data <- read_csv(paste0("/cloud/project/02-data/data.csv"))
data
```

The dataset is from The Mexican Migration Project (MMP). It was created in 1982 by an interdisciplinary team of researchers to further our understanding of the complex process of Mexican migration to the United States. The project is a binational research effort co-directed by Jorge Durand, professor of Social Anthropology at the University of Guadalajara (Mexico), and Douglas S. Massey, professor of Sociology and Public Affairs, with a joint appointment in the Woodrow Wilson School, at Princeton University (US).

Since its inception, the MMP's main focus has been to gather social as well as economic information on Mexican-US migration. The data collected has been compiled in a comprehensive database that is available to the public free of charge for research and educational purposes through this web-site.

The MMP170 Database contains an initial file with general demographic and migratory information for each member of a surveyed household (PERS). Pers170 has 132 variables and 176701 observations, hence is very large. Therefore, we selected 16 variables and filtered out rows that contain N/A's to create a new data table "data". These variables include:

"X1":
"sex" : Sex
  1= male
  2= female
"relhead": Relationship to household head
  1= Head 
  2= Husband/wife 
  3= Son/daughter 
  4= Father/mother 
  5= Brother/sister
  6= Niece/nephew
  7= Uncle/aunt 
  8= Cousin 
  9= Grandfather/grandmother 
  10= Grands on/granddaughter 
  11= Stepson/stepdaughter 
  12= Stepbrother/stepsister 
  13= Stepmother/stepfather 
  14= Son-in-law/daughter-in-law 
  15= Brother-in-law/sister-in-law 
  16= Father-in-law/m other-in-law 
  17= Other blood relative 
  18= Other relative by marriage 
  19= Non-relative 
  20= Adopted/foster child

```{r fix-statebrn}
data <- data %>%
  mutate(statebrn = case_when(
    statebrn == 1 ~ "Aguascalientes", 
    statebrn == 2 ~ "Baja California del Norte", 
    statebrn == 3 ~ "Baja California del Sur",
    statebrn == 4 ~ "Campeche",
    statebrn == 5 ~ "Coahuila",
    statebrn == 6 ~ "Colima",
    statebrn == 7 ~ "Chiapas",
    statebrn == 8 ~ "Chihuahua",
    statebrn == 9 ~ "Mexico City",
    statebrn == 10 ~ "Durango",
    statebrn == 11 ~ "Guanajuato",
    statebrn == 12 ~ "Guerrero",
    statebrn == 13 ~ "Hidalgo",
    statebrn == 14 ~ "Jalisco",
    statebrn == 15 ~ "México",
    statebrn == 16 ~ "Michoacán",
    statebrn == 17 ~ "Morelos",
    statebrn == 18 ~ "Nayarit",
    statebrn == 19 ~ "Nuevo Leon",
    statebrn == 20 ~ "Oaxaca",
    statebrn == 21 ~ "Puebla",
    statebrn == 22 ~ "Querétaro",
    statebrn == 23 ~ "Quintana Roo",
    statebrn == 24 ~ "San Luis Potosí",
    statebrn == 25 ~ "Sinaloa",
    statebrn == 26 ~ "Sonora",
    statebrn == 27 ~ "Tabasco",
    statebrn == 28 ~ "Tamaulipas",
    statebrn == 29 ~ "Tlaxcala",
    statebrn == 30 ~ "Veracruz",
    statebrn == 31 ~ "Yucatán",
    statebrn == 32 ~ "Zacatecas",
    statebrn == 212 ~ "El Salvador",
    statebrn == 9999 ~ "NA")
  )
```

"yrborn": Year of birth
"age": Age
"statebrn": State of birth
1 Aguascalientes
2 Baja California del Norte
3 Baja California del Sur
4 Campeche
5 Coahuila
6 Colima
7 Chiapas
8 Chihuahua
9 Mexico City
10 Durango
11 Guanajuato
12 Guerrero
13 Hidalgo
14 Jalisco
15 México
16 Michoacán
17 Morelos
18 Nayarit
19 Nuevo Leon
20 Oaxaca
21 Puebla
22 Querétaro
23 Quintana Roo
24 San Luis Potosí
25 Sinaloa
26 Sonora
27 Tabasco
28 Tamaulipas
29 Tlaxcala
30 Veracruz
31 Yucatán
32 Zacatecas
212 El Salvador

"marstat": Marital status
  1= Never married 
  2= Married (civil or religious) 
  3= Consensual union 
  4= Widowed 
  5= Divorced 
  6= Separated
"edyrs": School years completed
"occ": Principal occupation

```{r fix-occ}
data <- data %>%
  mutate(occtype = case_when(
    occ == 10 ~ "Unemployed (seeking work)", 
    occ == 20 ~ "Homemaker",
    occ == 30 ~ "Idle",
    occ == 42 ~ "Student",
    occ == 50 ~ "Retired",
    occ == 60 ~ "Other, unspecified (disabled, incarcerated, tourist and other)", 
    occ %in% c(110, 113, 116, 119) ~ "Professional", 
    occ %in% c(120, 123, 124, 129) ~ "Technical Worker",
    occ == 130 ~ "Educator",
    occ %in% c(142, 143, 145, 146, 149) ~ "Arts",
    occ == 144 ~ "Athlete",
    occ %in% c(210, 211) ~ "Administrator",
    occ %in% c(410, 411, 415, 417, 419) ~ "Agriculture", 
    occ %in% c(519, 520, 522, 523, 524, 526, 527, 529, 539) ~ "Manufacturing (skilled)", 
    occ %in% c(541, 547, 549) ~ "Manufacturing (unskilled)", 
    occ %in% c(552, 559) ~ "Transportation",
    occ %in% c(620, 621, 625, 629) ~ "Administrative support", 
    occ %in% c(711, 713, 719, 720, 721) ~ "Sales", 
    occ %in% c(810, 819, 820) ~ "Services", 
    occ %in% c(830, 831) ~ "Protection",
    occ == 9999 ~ "NA"
  ))
data %>%
  group_by(occtype) %>%
  count() %>%
  arrange(desc(n))
```
Unemployed/Not in the labor force (10 - 99)
10 Unemployed (seeking work)
20 Homemaker
30 Idle (adult not seeking work and not helping around
the house)
42 Student
50 Retired, unspecified
60 Other, unspecified (disabled, incarcerated, tourist and other)
Professionals (110-119)
110 Architects; civil, chemical, industrial engineers; etc.
113 Physicians; dentists; optometrists; nutritionists; professional nurses, etc.
116 Social scientists, lawyers, and psychologists
119 Other professionals
Technical workers (120 - 129)
120 Draftsmen; equipment technicians; video and sound technicians; etc.
123 Lab technicians (chemical, biological, pharmacological, and ecological)
124 Technicians in agriculture, veterinary sciences, forestry, fisheries, etc.
129 Other technicians
Educators (130 - 139)
130 Professors in universities and other institutions of higher learning
Occupations in the arts, performances and sports
(140 - 149)
142 Painters; sculptors; illustrators (fine artists);
designers; choreographers; etc.
143 Directors; producers; broadcasters; etc.
144 Athletes
145 Sports referees, umpires and coaches
146 Cartoonists; magicians; clowns; etc.
149 Other artists
Administrators and directors in both public and private sector (210 - 219)
210 Government administrators and legislators 
211 Presidents, directors, senior managers, large
factory owners
Agriculture, husbandry, forestry/fisheries workers
(410 - 419)
410 Agricultural workers
411 Husbandry workers
415 Fishery or marine workers
417 Foremen, overseers and other control persons of
agricultural, husbandry or fishery activities
419 Other agriculture, husbandry, forestry, fishery
workers
Manufacturing /repair supervisors (510 - 519)
519 Other supervisors including those in unspecified
industry
Manufacturing /repair skilled workers (520 - 529). For helpers, aides, apprentices, and trainees see 540- 549.
520 Food, beverage and tobacco production workers, including cooks in establishments.
522 Textile and leather production workers. (Examples:
tailors, upholsterers, cobblers, embroiderers, lithographers, seamstresses; for unskilled finishing work, see 542; for clothing designers, see 142.)
523 Wood and paper production or printing workers. (Examples: carpenter, cabinetmaker, linotypist, film developer, other skilled carpentry work)
524 Metal production and treatment workers; vehicle, machinery and equipment repair. (Examples: casters, lathe operators, boilermakers, welders, jewelers, goldsmiths, locksmiths, metal polishers, tool sharpeners, blacksmiths, metal forgers, refrigerator repair people, musical instrument repair people)
526 Construction, installation, maintenance and finishing workers. (Examples: bricklayers, house painters, plasterers, roofers, floor polishers, plumbers, parts installers)
527 Electrical equipment, electronics and telecommunications installation and repair workers. (Examples: electricians, television/radio repair people).
529 Other craftsmen or manufacturing workers, including those in unspecified industry
Manufacturing/repair heavy equipment operators
(530 - 539)
539 Other operators of heavy machinery and equipment,
including those in unspecified industry
Manufacturing/repair unskilled workers (540 - 549).
541 Mine, quarry and well unskilled workers
547 Electrical equipment, electronics and
telecommunications installation and repair unskilled
workers
549 Other unskilled workers including those in
unspecified industry (includes unspecified helpers or trainees)
Transportation workers (550 - 559)
552 Truck drivers and land-transport drivers (see also
712) and passenger vehicle drivers
559 Other conductors, drivers, pilots
Service and administration supervisors (610 - 619). Includes department chiefs, coordinators, and supervisors.
Administrative and support workers (620 - 629)
620 Secretaries; typists; data entry, recorders; etc.
621 Cashiers; collectors; ticket sellers; etc.
625 Postal and messenger workers
629 Other related workers, including generic office
workers and public servants when no further specification was provided
Sales workers (710 - 719)
711 Workers in retail establishments. (Examples: clerks, dispatchers)
713 Sales agents or representatives; brokers; insurance and real estate agents; auctioneers; etc.
719 Other retail workers, including sales people (unknown whether or not person works in an establishment).
Ambulatory workers (720 - 729) (those who work in their own house are included in the previous group)
720 Ambulatory salespeople: toys, lottery tickets, household goods, paper, other inedible items
721 Ambulatory service workers: food vendors, shoe shiners, car/windshield washers, street performers
Personal services workers in establishments; (not in private households) (810 - 819)
810 Innkeepers; bartenders; waiters; flight attendants.
819 Other personal service worker: e.g., parking lot
attendants
Domestic services workers (820)
820 Domestic services workers; caregivers, drivers,
gardeners, butler, and other service workers in private households, e.g. baby sitter.
Protection services workers (830 - 839)
830 Security personnel; police officers; watchmen, firefighters.
831 Armed forces personnel
9999 Other unspecified occupation; unknown

"hhincome" :
"usstate1": First US mig: State of residence
"usstatel": Latest US mig: State of residence
"usplace1": First US mig: City of residence
"usplacel": Latest US mig: City of residence
"usdur1": First US mig: Duration (in months)
"usdurl": Latest US mig: Duration (in months)

## Section 3. Regression Analysis Plan

In an effort to determine which characteristics of candidates influence their approval of a visa, we will be using a logistic regression model. Since our response variable is categorical (i.e., approved or denied), this is the best model at our disposal for us to use.

We will consider the potential interaction between occupation and household income, since those are generally interconnected. 

We will select our model using AIC criteria, because since we're dealing with people, we want to build a model that accounts for volatile human nature and the ever-changing sociopolitical climate that could influence whether or not someone's visa request is approved. AIC is used when we would rather say a variable is a relevant predictor, when in reality it might not be and so in this case, we would rather err on the side of a false positive because we are dealing with a constantly fluctuating issue.

## Section 4. References

Use the glimpse function print a summary of the data frame at the end of your proposal.
Place your data in the /data folder, and add dimensions (number of observations and variables) and the data dictionary (a description of every variable in the dataset) to the README in the folder. Make sure the data dictionary is neatly formatted and easy to read.

Sources:

Statistic used in Introduction:
RPC. (January 31, 2019). Number of refugee admissions in the U.S. from the fiscal year of 1990 to the fiscal year of 2018 [Graph]. In Statista. Retrieved October 29, 2019, from https://www-statista-com.proxy.lib.duke.edu/statistics/200061/number-of-refugees-arriving-in-the-us/

## The Data